var V=Object.defineProperty;var N=t=>{throw TypeError(t)};var Z=(t,e,r)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Y=(t,e,r)=>Z(t,typeof e!="symbol"?e+"":e,r),j=(t,e,r)=>e.has(t)||N("Cannot "+r);var n=(t,e,r)=>(j(t,e,"read from private field"),r?r.call(t):e.get(t)),p=(t,e,r)=>e.has(t)?N("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),F=(t,e,r,s)=>(j(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r);import{ad as k,ae as J,z as T,p as Q,i as C,g as K,h as x,d as W,t as X,af as ee,b as te,a as re,E as se,ag as ne,H as ie,G as ae,A as fe,V as U,ah as D,ai as ue,aj as oe,y as I,ak as ce,al as le,am as de,f as he,an as _e,ao as pe,u as ve,ap as be,aq as ge,ar as me,a7 as Se,as as Pe,at as ye,S as q,au as z,av as P}from"./Qt1Xl6Lm.js";var d,h,l,v,y,w,O;class we{constructor(e,r=!0){Y(this,"anchor");p(this,d,new Map);p(this,h,new Map);p(this,l,new Map);p(this,v,new Set);p(this,y,!0);p(this,w,()=>{var e=k;if(n(this,d).has(e)){var r=n(this,d).get(e),s=n(this,h).get(r);if(s)J(s),n(this,v).delete(r);else{var i=n(this,l).get(r);i&&(n(this,h).set(r,i.effect),n(this,l).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[a,u]of n(this,d)){if(n(this,d).delete(a),a===e)break;const f=n(this,l).get(u);f&&(T(f.effect),n(this,l).delete(u))}for(const[a,u]of n(this,h)){if(a===r||n(this,v).has(a))continue;const f=()=>{if(Array.from(n(this,d).values()).includes(a)){var _=document.createDocumentFragment();X(u,_),_.append(C()),n(this,l).set(a,{effect:u,fragment:_})}else T(u);n(this,v).delete(a),n(this,h).delete(a)};n(this,y)||!s?(n(this,v).add(a),Q(u,f,!1)):f()}}});p(this,O,e=>{n(this,d).delete(e);const r=Array.from(n(this,d).values());for(const[s,i]of n(this,l))r.includes(s)||(T(i.effect),n(this,l).delete(s))});this.anchor=e,F(this,y,r)}ensure(e,r){var s=k,i=ee();if(r&&!n(this,h).has(e)&&!n(this,l).has(e))if(i){var a=document.createDocumentFragment(),u=C();a.append(u),n(this,l).set(e,{effect:K(()=>r(u)),fragment:a})}else n(this,h).set(e,K(()=>r(this.anchor)));if(n(this,d).set(s,e),i){for(const[f,o]of n(this,h))f===e?s.unskip_effect(o):s.skip_effect(o);for(const[f,o]of n(this,l))f===e?s.unskip_effect(o.effect):s.skip_effect(o.effect);s.oncommit(n(this,w)),s.ondiscard(n(this,O))}else x&&(this.anchor=W),n(this,w).call(this)}}d=new WeakMap,h=new WeakMap,l=new WeakMap,v=new WeakMap,y=new WeakMap,w=new WeakMap,O=new WeakMap;function Ie(t,e,r=!1){x&&re();var s=new we(t),i=r?se:0;function a(u,f){if(x){const _=ne(t)===ie;if(u===_){var o=ae();fe(o),s.anchor=o,U(!1),s.ensure(u,f),U(!0);return}}s.ensure(u,f)}te(()=>{var u=!1;e((f,o=!0)=>{u=!0,a(o,f)}),u||a(!1,null)},i)}let E=!1;function Ae(t){var e=E;try{return E=!1,[t(),E]}finally{E=e}}const Ee={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function xe(t,e,r){return new Proxy({props:t,exclude:e},Ee)}const Oe={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(P(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let i=t.props[s];P(i)&&(i=i());const a=D(i,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(P(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const i=D(s,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(t,e){if(e===q||e===z)return!1;for(let r of t.props)if(P(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(P(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function De(...t){return new Proxy({props:t},Oe)}function Le(t,e,r,s){var M;var i=!be||(r&ge)!==0,a=(r&pe)!==0,u=(r&ye)!==0,f=s,o=!0,_=()=>(o&&(o=!1,f=u?ve(s):s),f),g;if(a){var G=q in t||z in t;g=((M=D(t,e))==null?void 0:M.set)??(G&&e in t?c=>t[e]=c:void 0)}var m,L=!1;a?[m,L]=Ae(()=>t[e]):m=t[e],m===void 0&&s!==void 0&&(m=_(),g&&(i&&ue(),g(m)));var b;if(i?b=()=>{var c=t[e];return c===void 0?_():(o=!0,c)}:b=()=>{var c=t[e];return c!==void 0&&(f=void 0),c===void 0?f:c},i&&(r&oe)===0)return b;if(g){var H=t.$$legacy;return(function(c,A){return arguments.length>0?((!i||!A||H||L)&&g(A?b():c),c):b()})}var R=!1,S=((r&me)!==0?Se:Pe)(()=>(R=!1,b()));a&&I(S);var $=he;return(function(c,A){if(arguments.length>0){const B=A?I(S):i&&a?ce(c):c;return le(S,B),R=!0,f!==void 0&&(f=B),c}return de&&R||($.f&_e)!==0?S.v:I(S)})}export{we as B,Ie as i,Le as p,xe as r,De as s};
